#!/bin/sh

set -e

declare -a list_of_files=(
  ".bundler-exec.sh"
  ".gitconfig"
  ".githelpers"
  ".jshintrc"
  ".tmux.conf"
  ".vim"
  ".vimrc"
  ".zlogin"
  ".zlogout"
  ".zprezto"
  ".zpreztorc"
  ".zprofile"
  ".zshenv"
  ".zshrc"
)

echo "==> Fetching sources..."
git clone git@github.com:AdrienGiboire/dotfiles.git .dotfiles &> /dev/null
wait $!

echo "==> Installing..."
cd ~/.dotfiles

echo "==> Installing Brew..."
command -v brew >/dev/null 2>&1 || { echo >&2 ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"; exit 1; }

echo "==> Installing Cask..."
brew install caskroom/cask/brew-cask

echo "==> Installing apps..."
apps=(
  android-file-transfer
  appcleaner
  asepsis
  battle-net
  caffeine
  cheatsheet
  dash
  doubletwist
  dropbox
  evernote
  firefox
  google-chrome
  google-drive
  google-hangouts
  hipchat
  iterm2
  skype
  slack
  spectacle
  spotify
  steam
  vlc
)

brew cask install --appdir="/Applications" ${apps[@]}

echo "==> Linking dotfiles..."
for file in "${list_of_files[@]}"; do
  if $verbose; then
    echo "====> Linking $file..."
  fi

  ln -s ~/.dotfiles/$file ~/$file
done

echo "==> Bootstrapping..."
./scripts/bootstrap

